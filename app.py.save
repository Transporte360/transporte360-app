
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Transporte360 - TMS</title>

  <style>
    :root{
      --bg-1:#0b1220;
      --bg-2:#0f1b2d;
      --surface:#ffffff;
      --muted:#f3f6fb;
      --text:#0b1220;
      --text-2:#55657a;
      --text-3:#7c8aa0;
      --border:#e6edf6;

      --primary:#1E3A5F;     /* azul marino */
      --primary-2:#274a78;
      --accent:#E67E22;      /* naranja */
      --accent-2:#f09a4a;

      --success:#16a34a;
      --danger:#dc2626;
      --warning:#f59e0b;

      --shadow: 0 16px 40px rgba(10,20,40,.12);
      --shadow2: 0 10px 24px rgba(10,20,40,.10);

      --r12:12px;
      --r16:16px;
      --r20:20px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(900px 500px at 20% 10%, rgba(230,126,34,.18), transparent 60%),
        radial-gradient(900px 500px at 80% 20%, rgba(30,58,95,.22), transparent 55%),
        linear-gradient(135deg, #eef3ff 0%, #f8fafc 60%, #fff 100%);
    }

    /* ====== Helpers ====== */
    .hidden{display:none !important}
    .container{width:min(1120px, 92vw); margin:0 auto}
    .card{
      background:var(--surface);
      border:1px solid var(--border);
      border-radius:var(--r16);
      box-shadow:var(--shadow2);
    }
    .card-pad{padding:18px}
    .muted{color:var(--text-2)}
    .tiny{color:var(--text-3); font-size:12px}
    .h1{font-size:28px; font-weight:800; letter-spacing:-.3px}
    .h2{font-size:18px; font-weight:750}
    .row{display:flex; gap:14px; align-items:center}
    .col{display:flex; flex-direction:column; gap:10px}
    .grid{display:grid; gap:14px}
    .g2{grid-template-columns:repeat(2, minmax(0,1fr))}
    .g3{grid-template-columns:repeat(3, minmax(0,1fr))}
    .g4{grid-template-columns:repeat(4, minmax(0,1fr))}
    @media (max-width: 980px){
      .g4{grid-template-columns:repeat(2, minmax(0,1fr))}
      .g3{grid-template-columns:repeat(1, minmax(0,1fr))}
      .g2{grid-template-columns:repeat(1, minmax(0,1fr))}
    }

    .btn{
      border:0;
      border-radius:14px;
      padding:12px 14px;
      font-weight:700;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:10px;
      transition: transform .06s ease, background .15s ease, box-shadow .15s ease, opacity .15s ease;
      user-select:none;
    }
    .btn:active{transform: translateY(1px)}
    .btn-primary{
      background:linear-gradient(180deg, var(--primary-2), var(--primary));
      color:#fff;
      box-shadow: 0 10px 24px rgba(30,58,95,.22);
    }
    .btn-primary:hover{opacity:.95}
    .btn-ghost{
      background:transparent;
      color:var(--primary);
      border:1px solid var(--border);
    }
    .btn-ghost:hover{background:#f7fafc}

    .input{
      width:100%;
      padding:12px 12px 12px 40px;
      border-radius:14px;
      border:1px solid var(--border);
      background:#fff;
      outline:none;
      transition:border .15s ease, box-shadow .15s ease;
      font-weight:600;
    }
    .input:focus{
      border-color: rgba(30,58,95,.45);
      box-shadow: 0 0 0 4px rgba(30,58,95,.10);
    }
    .label{font-size:12px; font-weight:800; color:var(--text-2); display:flex; gap:8px; align-items:center}
    .field{display:flex; flex-direction:column; gap:8px}
    .icon-left{
      position:absolute; left:12px; top:50%; transform:translateY(-50%);
      width:18px; height:18px; opacity:.7;
    }
    .icon-btn{
      border:0; background:transparent; cursor:pointer;
      position:absolute; right:10px; top:50%; transform:translateY(-50%);
      padding:6px; border-radius:10px;
    }
    .icon-btn:hover{background:#f1f5f9}

    /* ====== Layout app ====== */
    .app-shell{min-height:100vh; display:grid; grid-template-columns: 270px 1fr}
    @media (max-width: 980px){ .app-shell{grid-template-columns: 1fr} }

    .sidebar{
      padding:18px;
      background: linear-gradient(180deg, rgba(30,58,95,.98), rgba(15,27,45,.98));
      color:#fff;
      position:sticky; top:0; height:100vh;
      border-right:1px solid rgba(255,255,255,.06);
    }
    @media (max-width: 980px){
      .sidebar{position:relative; height:auto; border-right:0; border-bottom:1px solid rgba(255,255,255,.06)}
    }

    .brand{
      display:flex; align-items:center; gap:12px;
      padding:12px; border-radius:16px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.08);
    }
    .logo{
      width:44px; height:44px; border-radius:14px;
      background: #0b2545;
      display:grid; place-items:center;
      box-shadow: 0 10px 20px rgba(0,0,0,.22);
    }
    .badge{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px; border-radius:999px;
      background: rgba(230,126,34,.14);
      border: 1px solid rgba(230,126,34,.25);
      color:#fff;
      font-size:12px; font-weight:800;
    }
    .nav{margin-top:16px; display:flex; flex-direction:column; gap:8px}
    .nav a{
      color: rgba(255,255,255,.86);
      text-decoration:none;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid transparent;
      display:flex; align-items:center; gap:10px;
      font-weight:750;
    }
    .nav a:hover{
      background: rgba(255,255,255,.06);
      border-color: rgba(255,255,255,.08);
    }
    .nav a.active{
      background: rgba(230,126,34,.16);
      border-color: rgba(230,126,34,.26);
      color:#fff;
    }
    .nav-ic{
      width:18px; height:18px; opacity:.9;
      filter: drop-shadow(0 2px 8px rgba(0,0,0,.2));
    }

    .content{padding:20px}
    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      margin-bottom:14px;
    }
    .topbar .right{display:flex; gap:10px; align-items:center}
    .pill{
      background:#fff;
      border:1px solid var(--border);
      border-radius:999px;
      padding:10px 12px;
      display:flex; gap:10px; align-items:center;
      box-shadow: 0 8px 18px rgba(10,20,40,.06);
    }

    /* ====== Stat cards ====== */
    .stat{
      border-radius:var(--r16);
      padding:16px;
      border:1px solid var(--border);
      background: linear-gradient(180deg, #fff, #fbfdff);
      box-shadow: 0 12px 28px rgba(10,20,40,.07);
      display:flex; flex-direction:column; gap:10px;
      position:relative; overflow:hidden;
    }
    .stat:before{
      content:"";
      position:absolute; inset:-40px -60px auto auto;
      width:140px; height:140px;
      background: radial-gradient(circle at 30% 30%, rgba(230,126,34,.25), transparent 55%);
      transform: rotate(12deg);
    }
    .stat .kpi{font-size:26px; font-weight:900; letter-spacing:-.4px}
    .stat .meta{display:flex; align-items:center; justify-content:space-between}
    .chip{
      display:inline-flex; align-items:center; gap:6px;
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      font-weight:800;
      border:1px solid var(--border);
      background:#fff;
      color:var(--text-2);
    }
    .chip.up{border-color: rgba(22,163,74,.25); background: rgba(22,163,74,.08); color: var(--success)}
    .chip.down{border-color: rgba(220,38,38,.25); background: rgba(220,38,38,.08); color: var(--danger)}

    /* ====== Charts placeholders ====== */
    .chart{
      height:240px;
      background: linear-gradient(180deg, #fff, #fbfdff);
      border:1px solid var(--border);
      border-radius:var(--r16);
      box-shadow: var(--shadow2);
      padding:16px;
      display:flex; flex-direction:column; gap:10px;
    }
    .chart-area{
      flex:1;
      border-radius:14px;
      border:1px dashed rgba(30,58,95,.25);
      background:
        linear-gradient(90deg, rgba(30,58,95,.05) 1px, transparent 1px),
        linear-gradient(rgba(30,58,95,.05) 1px, transparent 1px);
      background-size: 28px 28px;
      display:grid; place-items:center;
      color: var(--text-3);
      font-weight:800;
      font-size:12px;
    }

    /* ====== Login screen ====== */
    .login-wrap{
      min-height:100vh; display:grid; place-items:center; padding:18px;
    }
    .login-card{
      width:min(440px, 92vw);
      border-radius:20px;
      background:#fff;
      border:1px solid var(--border);
      box-shadow: var(--shadow);
      padding:20px;
      position:relative;
      overflow:hidden;
    }
    .login-card:before{
      content:"";
      position:absolute; inset:-140px -160px auto auto;
      width:320px; height:320px;
      background: radial-gradient(circle at 35% 35%, rgba(230,126,34,.24), transparent 60%);
      transform: rotate(10deg);
    }
    .login-head{
      position:relative;
      display:flex; flex-direction:column; gap:8px;
      margin-bottom:14px;
    }
    .login-brand{display:flex; align-items:center; gap:12px}
    .login-logo{
      width:52px; height:52px; border-radius:16px;
      background: var(--primary);
      display:grid; place-items:center;
      box-shadow: 0 14px 28px rgba(30,58,95,.20);
    }
    .sep{height:1px; background:var(--border); margin:14px 0}
    .alert{
      border-radius:14px;
      padding:12px;
      background: rgba(220,38,38,.06);
      border:1px solid rgba(220,38,38,.18);
      color:#7f1d1d;
      font-weight:800;
      display:flex; gap:10px; align-items:flex-start;
    }
  </style>
</head>

<body>

  <!-- ================= LOGIN VIEW ================= -->
  <section id="viewLogin" class="login-wrap">
    <div class="login-card">
      <div class="login-head">
        <div class="login-brand">
          <div class="login-logo" aria-hidden="true">
            <!-- Icono simple -->
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none">
              <path d="M4 12l8-6 8 6" stroke="#E67E22" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M7 12v8h10v-8" stroke="#fff" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
              <circle cx="12" cy="12" r="2" fill="#E67E22"/>
            </svg>
          </div>
          <div class="col" style="gap:2px">
            <div class="h2" style="margin:0; font-size:22px">Transporte360</div>
            <div class="tiny">Sistema de Gesti√≥n de Flotas</div>
          </div>
        </div>

        <div class="sep"></div>

        <div class="col" style="gap:4px">
          <div class="h2">Iniciar Sesi√≥n</div>
          <div class="muted" style="font-size:13px">Ingrese sus credenciales para acceder al sistema</div>
        </div>
      </div>

      <div id="loginError" class="alert hidden">
        <span>‚ö†Ô∏è</span>
        <div>
          <div>Credenciales incorrectas</div>
          <div class="tiny" style="color:#7f1d1d; opacity:.85">Revise usuario y PIN</div>
        </div>
      </div>

      <div style="height:12px"></div>

      <form id="loginForm" class="col" style="gap:12px; position:relative">
        <div class="field">
          <div class="label">üë§ Usuario</div>
          <div style="position:relative">
            <svg class="icon-left" viewBox="0 0 24 24" fill="none">
              <path d="M20 21a8 8 0 10-16 0" stroke="rgba(30,58,95,.75)" stroke-width="2" stroke-linecap="round"/>
              <path d="M12 13a4 4 0 100-8 4 4 0 000 8z" stroke="rgba(30,58,95,.75)" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <input class="input" id="username" name="username" placeholder="manager / driver1 / driver2" autocomplete="username" required />
          </div>
        </div>

        <div class="field">
          <div class="label">üîí PIN (4 d√≠gitos)</div>
          <div style="position:relative">
            <svg class="icon-left" viewBox="0 0 24 24" fill="none">
              <path d="M7 11V8a5 5 0 0110 0v3" stroke="rgba(30,58,95,.75)" stroke-width="2" stroke-linecap="round"/>
              <path d="M7 11h10a2 2 0 012 2v6a2 2 0 01-2 2H7a2 2 0 01-2-2v-6a2 2 0 012-2z" stroke="rgba(30,58,95,.75)" stroke-width="2"/>
            </svg>
            <input class="input" id="pin" name="pin" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" inputmode="numeric" pattern="[0-9]{4}" maxlength="4" required />
            <button type="button" class="icon-btn" id="togglePin" aria-label="Mostrar/Ocultar PIN">üëÅÔ∏è</button>
          </div>
          <div class="tiny">Ejemplo: manager=1234, driver1=5678, driver2=9012</div>
        </div>

        <button class="btn btn-primary" type="submit" style="position:relative; z-index:1">
          Entrar
          <span style="width:6px"></span>
          <span style="display:inline-flex; width:8px; height:8px; border-radius:999px; background:rgba(255,255,255,.65)"></span>
        </button>

        <button class="btn btn-ghost" type="button" id="goDemo">
          Ver demo dashboard (sin login)
        </button>

        <div class="sep"></div>

        <div class="tiny">
          ¬© 2026 Transporte360. Si hay problemas, contacte al administrador.
        </div>
      </form>
    </div>
  </section>

  <!-- ================= APP VIEW ================= -->
  <section id="viewApp" class="hidden">
    <div class="app-shell">

      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="brand">
          <div class="logo" aria-hidden="true">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
              <path d="M4 12l8-6 8 6" stroke="#E67E22" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M7 12v8h10v-8" stroke="#fff" stroke-width="2.4" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </div>
          <div class="col" style="gap:4px">
            <div style="font-weight:900; font-size:16px; line-height:1">Transporte360</div>
            <div class="badge">TMS ¬∑ Operaciones</div>
          </div>
        </div>

        <div style="height:12px"></div>

        <div class="tiny" style="color:rgba(255,255,255,.72); padding:0 6px">
          Usuario: <span id="userName" style="color:#fff; font-weight:900">‚Äî</span><br/>
          Rol: <span id="userRole" style="color:#fff; font-weight:900">‚Äî</span>
        </div>

        <div class="nav" id="nav">
          <a href="#" data-screen="dashboard" class="active">
            <span class="nav-ic">üìä</span> Dashboard
          </a>
          <a href="#" data-screen="trips">
            <span class="nav-ic">üßæ</span> Viajes
          </a>
          <a href="#" data-screen="fuel">
            <span class="nav-ic">‚õΩ</span> Repostajes
          </a>
          <a href="#" data-screen="drivers">
            <span class="nav-ic">üë∑</span> Conductores
          </a>
          <a href="#" data-screen="vehicles">
            <span class="nav-ic">üöö</span> Veh√≠culos
          </a>
          <a href="#" data-screen="docs">
            <span class="nav-ic">üìé</span> Documentos
          </a>
          <a href="#" data-screen="settings">
            <span class="nav-ic">‚öôÔ∏è</span> Ajustes
          </a>

          <div style="height:10px"></div>

          <a href="#" id="logoutBtn">
            <span class="nav-ic">üö™</span> Salir
          </a>
        </div>
      </aside>

      <!-- Main Content -->
      <main class="content">
        <div class="topbar">
          <div class="col" style="gap:2px">
            <div class="h1" id="screenTitle">Panel de Gesti√≥n</div>
            <div class="muted" id="screenSubtitle">Resumen mensual de operaciones ‚Äî Enero 2026</div>
          </div>

          <div class="right">
            <div class="pill">
              <span class="tiny">Estado:</span>
              <span class="chip up">Operativo</span>
            </div>
            <button class="btn btn-primary" type="button" id="addActionBtn">+ Nueva acci√≥n</button>
          </div>
        </div>

        <!-- DASHBOARD -->
        <section id="screen-dashboard" class="col" style="gap:14px">

          <div class="grid g4">
            <div class="stat">
              <div class="row" style="justify-content:space-between">
                <div class="h2">Kil√≥metros Totales</div>
                <span class="chip up">+12.5%</span>
              </div>
              <div class="kpi">45.280</div>
              <div class="tiny">Tendencia positiva vs mes anterior</div>
            </div>

            <div class="stat">
              <div class="row" style="justify-content:space-between">
                <div class="h2">Kil√≥metros Vac√≠os</div>
                <span class="chip down">18.2%</span>
              </div>
              <div class="kpi">8.241</div>
              <div class="tiny">Tendencia negativa -3.1% vs objetivo</div>
            </div>

            <div class="stat">
              <div class="row" style="justify-content:space-between">
                <div class="h2">Ingresos Totales</div>
                <span class="chip up">+8.7%</span>
              </div>
              <div class="kpi">‚Ç¨54.336</div>
              <div class="tiny">Tendencia positiva vs mes anterior</div>
            </div>

            <div class="stat">
              <div class="row" style="justify-content:space-between">
                <div class="h2">Beneficio Neto</div>
                <span class="chip up">+15.3%</span>
              </div>
              <div class="kpi">‚Ç¨12.847</div>
              <div class="tiny">Margen: <b>23.6%</b></div>
            </div>
          </div>

          <div class="grid g3">
            <div class="card card-pad">
              <div class="row" style="justify-content:space-between">
                <div class="h2">Costes Variables</div>
                <span class="chip">‚Ç¨18.560</span>
              </div>
              <div class="tiny" style="margin-top:6px">Combustible <b>‚Ç¨12.340</b> ¬∑ Peajes <b>‚Ç¨4.520</b> ¬∑ Otros <b>‚Ç¨1.700</b></div>
              <div class="chart-area" style="margin-top:12px; height:140px">placeholder gr√°fico variables</div>
            </div>

            <div class="card card-pad">
              <div class="row" style="justify-content:space-between">
                <div class="h2">Combustible Real</div>
                <span class="chip">‚Ç¨12.340</span>
              </div>
              <div class="tiny" style="margin-top:6px">Litros totales <b>8,227 L</b> ¬∑ Precio medio <b>‚Ç¨1.50/L</b> ¬∑ Consumo <b>18.2 L/100km</b></div>
              <div class="chart-area" style="margin-top:12px; height:140px">placeholder gr√°fico combustible</div>
            </div>

            <div class="card card-pad">
              <div class="row" style="justify-content:space-between">
                <div class="h2">Costes Fijos Asignados</div>
                <span class="chip">‚Ç¨10.589</span>
              </div>
              <div class="tiny" style="margin-top:6px">Seguros <b>‚Ç¨4.200</b> ¬∑ Mantenimiento <b>‚Ç¨3.890</b> ¬∑ Otros <b>‚Ç¨2.499</b></div>
              <div class="chart-area" style="margin-top:12px; height:140px">placeholder gr√°fico fijos</div>
            </div>
          </div>

          <div class="grid g2">
            <div class="chart">
              <div class="row" style="justify-content:space-between">
                <div class="h2">Tendencia Mensual</div>
                <span class="tiny">Ingresos vs Costes</span>
              </div>
              <div class="chart-area">placeholder chart line/bar</div>
            </div>

            <div class="chart">
              <div class="row" style="justify-content:space-between">
                <div class="h2">Distribuci√≥n de Viajes</div>
                <span class="tiny">Total: <b>142</b></span>
              </div>
              <div class="chart-area">placeholder donut / pie</div>
              <div class="row" style="justify-content:space-between">
                <span class="tiny"><b>81.8%</b> Cargados (116)</span>
                <span class="tiny"><b>18.2%</b> Vac√≠os (26)</span>
              </div>
            </div>
          </div>

          <div class="card card-pad">
            <div class="row" style="justify-content:space-between; margin-bottom:10px">
              <div class="h2">Actividad Reciente</div>
              <span class="tiny">Hoy</span>
            </div>

            <div class="grid g2">
              <div class="card card-pad" style="box-shadow:none; background:#fbfdff">
                <div class="row" style="justify-content:space-between">
                  <div style="font-weight:900">Miguel Fern√°ndez</div>
                  <span class="chip up">Cargado</span>
                </div>
                <div class="tiny">ABC-1234 ¬∑ 15/01/2026</div>
                <div class="row" style="justify-content:space-between; margin-top:8px">
                  <div style="font-weight:800; color:var(--primary)">Madrid ‚Üí Barcelona</div>
                  <div class="tiny">628 km</div>
                </div>
                <div class="row" style="justify-content:space-between; margin-top:6px">
                  <div class="tiny">Ingresos</div>
                  <div style="font-weight:900">‚Ç¨753.60</div>
                </div>
              </div>

              <div class="card card-pad" style="box-shadow:none; background:#fbfdff">
                <div class="row" style="justify-content:space-between">
                  <div style="font-weight:900">Ana Mart√≠nez</div>
                  <span class="chip down">Vac√≠o</span>
                </div>
                <div class="tiny">XYZ-5678 ¬∑ 15/01/2026</div>
                <div class="row" style="justify-content:space-between; margin-top:8px">
                  <div style="font-weight:800; color:var(--primary)">Valencia ‚Üí Sevilla</div>
                  <div class="tiny">‚Äî km</div>
                </div>
                <div class="row" style="justify-content:space-between; margin-top:6px">
                  <div class="tiny">Ingresos</div>
                  <div style="font-weight:900">‚Ç¨0.00</div>
                </div>
              </div>
            </div>
          </div>

        </section>

        <!-- OTHER SCREENS (placeholders con mismo formato) -->
        <section id="screen-trips" class="hidden">
          <div class="card card-pad">
            <div class="h2">Viajes</div>
            <div class="muted">Aqu√≠ va tu tabla/l√≥gica actual ‚Äî solo formato ya est√°.</div>
          </div>
        </section>

        <section id="screen-fuel" class="hidden">
          <div class="card card-pad">
            <div class="h2">Repostajes</div>
            <div class="muted">Aqu√≠ metes tu secci√≥n de repostajes con este mismo estilo.</div>
          </div>
        </section>

        <section id="screen-drivers" class="hidden">
          <div class="card card-pad">
            <div class="h2">Conductores</div>
            <div class="muted">Listado + alta/edici√≥n con cards y botones.</div>
          </div>
        </section>

        <section id="screen-vehicles" class="hidden">
          <div class="card card-pad">
            <div class="h2">Veh√≠culos</div>
            <div class="muted">Ficha del cami√≥n, ITV, seguro, etc.</div>
          </div>
        </section>

        <section id="screen-docs" class="hidden">
          <div class="card card-pad">
            <div class="h2">Documentos</div>
            <div class="muted">CMR, facturas, recibos‚Ä¶</div>
          </div>
        </section>

        <section id="screen-settings" class="hidden">
          <div class="card card-pad">
            <div class="h2">Ajustes</div>
            <div class="muted">Roles, usuarios, par√°metros, etc.</div>
          </div>
        </section>

      </main>
    </div>
  </section>

  <script>
    // ===== Mock login (solo demo) =====
    const users = {
      manager: { pin: "1234", role: "manager", name: "Carlos Rodr√≠guez" },
      driver1:  { pin: "5678", role: "driver",  name: "Miguel Fern√°ndez" },
      driver2:  { pin: "9012", role: "driver",  name: "Ana Mart√≠nez" },
    };

    const viewLogin = document.getElementById("viewLogin");
    const viewApp = document.getElementById("viewApp");

    const loginForm = document.getElementById("loginForm");
    const username = document.getElementById("username");
    const pin = document.getElementById("pin");
    const loginError = document.getElementById("loginError");
    const togglePin = document.getElementById("togglePin");
    const goDemo = document.getElementById("goDemo");

    const userName = document.getElementById("userName");
    const userRole = document.getElementById("userRole");
    const logoutBtn = document.getElementById("logoutBtn");

    const nav = document.getElementById("nav");
    const screenTitle = document.getElementById("screenTitle");
    const screenSubtitle = document.getElementById("screenSubtitle");
    const addActionBtn = document.getElementById("addActionBtn");

    togglePin.addEventListener("click", () => {
      pin.type = (pin.type === "password") ? "text" : "password";
    });

    function showApp(u){
      loginError.classList.add("hidden");
      viewLogin.classList.add("hidden");
      viewApp.classList.remove("hidden");

      userName.textContent = u?.name || "Demo";
      userRole.textContent = u?.role || "manager";

      // Por defecto dashboard
      switchScreen("dashboard");
      setActiveNav("dashboard");
    }

    function showLogin(){
      viewApp.classList.add("hidden");
      viewLogin.classList.remove("hidden");
      username.value = "";
      pin.value = "";
    }

    loginForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const u = users[username.value?.trim()];
      if(!u || u.pin !== pin.value?.trim()){
        loginError.classList.remove("hidden");
        return;
      }
      showApp(u);
    });

    goDemo.addEventListener("click", () => showApp(null));

    logoutBtn.addEventListener("click", (e) => {
      e.preventDefault();
      showLogin();
    });

    function setActiveNav(screen){
      [...nav.querySelectorAll("a[data-screen]")].forEach(a => {
        a.classList.toggle("active", a.dataset.screen === screen);
      });
    }

    function switchScreen(screen){
      const screens = ["dashboard","trips","fuel","drivers","vehicles","docs","settings"];
      screens.forEach(s => {
        document.getElementById("screen-" + s).classList.toggle("hidden", s !== screen);
      });

      if(screen === "dashboard"){
        screenTitle.textContent = "Panel de Gesti√≥n";
        screenSubtitle.textContent = "Resumen mensual de operaciones ‚Äî Enero 2026";
      } else {
        const titles = {
          trips:"Viajes",
          fuel:"Repostajes",
          drivers:"Conductores",
          vehicles:"Veh√≠culos",
          docs:"Documentos",
          settings:"Ajustes"
        };
        screenTitle.textContent = titles[screen] || "Secci√≥n";
        screenSubtitle.textContent = "Transporte360 ‚Äî Operaciones";
      }
    }

    nav.addEventListener("click", (e) => {
      const a = e.target.closest("a[data-screen]");
      if(!a) return;
      e.preventDefault();
      const screen = a.dataset.screen;
      setActiveNav(screen);
      switchScreen(screen);
    });

    addActionBtn.addEventListener("click", () => {
      alert("Aqu√≠ conectas tu l√≥gica: nuevo viaje / nuevo repostaje / etc. (solo UI ahora).");
    });

    // Arranque: login visible
    showLogin();
  </script>
</body>
</html>
